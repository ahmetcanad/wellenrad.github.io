<!--Not AhmetCanAd who vibe codes hard here...congrats for reading this line. Take this cookie (â—â€¢á´—â€¢â—)â¤ ðŸª -->

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>VibeKreis - Das Spiel</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: "Roboto", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #ffffff;
            background-image: linear-gradient(155deg, #a98affdd 0%, #c3cfe2 100%);
            overflow: hidden;
        }
        
        .game-container {
            text-align: center;
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.444);
            width: 700px;
            height: auto;
            min-height: 780px;
            position: relative;
        }
        
        .title-container {
            position: relative;
            height: 50px;
            margin-bottom: 25px;
            margin-top: -5px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .hanging-title {
            font-family: "Press Start 2P", cursive;
            font-size: 28px;
            font-weight: 500;
            color: #fff;
            text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.3);
            letter-spacing: -2px;
            text-transform: uppercase;
            background: linear-gradient(135deg, #9cd4f7 0%, #b03ae7 100%);
            padding: 10px 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            position: relative;
            transition: transform 0.3s ease;
            cursor: default;
        }
        
        .hanging-title:hover {
            transform: rotate(2deg) scale(1.05);
            animation: wobble 2s ease;
        }
        
        @keyframes wobble {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-2.5eg) scale(1.02); }
            50% { transform: rotate(2.5deg) scale(1.02); }
            75% { transform: rotate(-2deg) scale(1.01); }
        }
        
        .board-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 30px auto 70px;
        }
        
        .board {
            width: 400px;
            height: 400px;
            background-color: #e0e0e0;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .target-area {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            position: absolute;
            overflow: hidden;
            transition: opacity 0.3s ease;
        }
        
        .needle-container {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 400px;
            height: 400px;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 15;
        }
        
        .needle-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            background-color: #303030;
            border-radius: 50%;
            border: 3px solid #fa3949;
            transform: translate(-50%, -50%);
            z-index: 20;
            pointer-events: none;
        }
        
        .needle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 180px;
            background: linear-gradient(to top, #fa3949, #ff6b6b);
            border: 2px solid #303030d2;
            border-radius: 2px 2px 0 0;
            transform-origin: 50% 100%;
            transform: translate(-50%, -100%) rotate(0deg);
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }
        
        .category-labels {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .category-label {
            position: absolute;
            font-size: 14px;
            font-weight: bold;
            color: #2f3542;
            padding: 10px 12px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(245, 245, 245, 0.7) 100%);
            backdrop-filter: blur(5px);
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
            width: 120px;
            text-align: justify;
            z-index: 5;
            transition: all 0.3s ease;
            opacity: 0;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 45px;
            transform: scale(0.8);
            border: 2px solid transparent;
        }
        
        .category-label.visible {
            opacity: 1;
            transform: scale(1);
        }
        
        .category-label.top {
            top: -30px;
            left: 50%;
            transform: translateX(-50%) scale(0.8);
            border-color: #3742fa;
            background: linear-gradient(135deg, rgba(227, 242, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%);
            opacity: 0.9;
        }
        
        .category-label.top.visible {
            transform: translateX(-50%) scale(1);
        }
        
        .category-label.right {
            top: 50%;
            right: -55px;
            left: auto;
            transform: translateY(-50%) scale(0.8);
            border-color: #ff6b6b;
            background: linear-gradient(135deg, rgba(255, 227, 227, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%);
            opacity: 0.9;
        }
        
        .category-label.right.visible {
            transform: translateY(-50%) scale(1);
        }
        
        .category-label.bottom {
            bottom: -30px;
            left: 50%;
            top: auto;
            transform: translateX(-50%) scale(0.8);
            border-color: #27ff5d;
            background: linear-gradient(135deg, rgba(227, 255, 227, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%);
            opacity: 0.9;
        }
        
        .category-label.bottom.visible {
            transform: translateX(-50%) scale(1);
        }
        
        .category-label.left {
            top: 50%;
            left: -55px;
            transform: translateY(-50%) scale(0.8);
            border-color: #feca57;
            background: linear-gradient(135deg, rgba(255, 243, 227, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%);
            opacity: 0.9;
        }
        
        .category-label.left.visible {
            transform: translateY(-50%) scale(1);
        }
        
        .game-mode-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .mode-button {
            padding: 10px 20px;
            border: 2px solid #3742fa;
            background: white;
            color: #3742fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .mode-button.active {
            background: #3742fa;
            color: white;
        }
        
        .mode-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(55, 66, 250, 0.3);
        }
        
        .round-counter {
            font-size: 18px;
            color: #2f3542;
            margin-bottom: 15px;
            font-weight: bold;
            padding: 8px 15px;
            background: #f5f5f5;
            border-radius: 8px;
            display: inline-block;
        }
        
        .round-cover-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(15px);
            flex-direction: column;
            transition: opacity 0.2s ease-out
        }
        
        .round-cover-text {
            font-family: "Roboto", sans-serif;
            font-size: 32px;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 40px;
            text-align: center;
            padding: 0 20px;
        }
        
        .round-cover-button {
            font-size: 20px;
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.05s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            width: auto;
            height: auto;
            max-width: 150px;
            max-height: 100px;
        }
        
        .round-cover-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .round-cover-overlay.show {
            display: flex;
            animation: fadeIn 0.2s ease-out;
        }
        
        .controls {
            margin-top: 50px;
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        button {
            font-size: 16px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: #5352ed;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            flex: 1 0 auto;
            max-width: 150px;
        }
        
        button:hover:not(:disabled) {
            background-color: #3742fa;
        }
        
        button:disabled {
            background-color: #a4b0be;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        #score {
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: bold;
            color: #2f3542;
        }
        
        #totalScore {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #2f3542;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .team-score {
            background-color: #f5f5f5;
            padding: 8px 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }
        
        .team-score.current-team {
            background-color: #3742fa;
            color: white;
            border-color: #3742fa;
            box-shadow: 0 3px 10px rgba(55, 66, 250, 0.3);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .team-setup {
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 2rem auto;
            text-align: center;
        }
        
        #teamCount {
            padding: 10px 15px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 40px;
            margin-left: 10px;
        }
        
        #teamCount:hover {
            border-color: #3742fa;
        }
        
        #teamCount:focus {
            outline: none;
            border-color: #3742fa;
            box-shadow: 0 0 0 3px rgba(55, 66, 250, 0.1);
        }
        
        .team-name-input {
            margin: 0.5rem auto;
            padding: 8px 10px;
            width: 300px;
            max-width: 90vw;
            display: block;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-size: 15px;
        }
        
        .team-name-input.error {
            border-color: #ff6b6b;
            background-color: #ffe0e0;
        }
        
        #teamCount.error {
            border-color: #ff6b6b;
            background-color: #ffe0e0;
        }
        
        .error-message {
            color: #ff6b6b;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .count-error-message {
            color: #ff6b6b;
            font-size: 14px;
            margin-top: 5px;
            margin-bottom: 10px;
            display: none;
        }
        
        .count-error-message.show {
            display: block;
        }
        
        #startGame {
            margin-top: 1rem;
        }
        
        .modal-content {
            background-color: #ffffff;
            margin: 10% auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(-50px);
            opacity: 0;
            transition: all 0.3s ease-out;
        }
        
        .modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        
        .modal h2 {
            color: #3742fa;
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .modal-body {
            color: #2f3542;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .modal-body ol {
            padding-left: 20px;
        }
        
        .modal-body ul {
            padding-left: 30px;
            margin-top: 10px;
        }
        
        .score-5 {
            color: #FFD700;
            font-weight: bold;
            text-shadow: 0 0 3px rgba(255, 215, 0, 0.5);
        }
        
        .score-3 {
            color: #3742fa;
            font-weight: bold;
        }
        
        .score-1 {
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .score-0 {
            color: #a4b0be;
            font-weight: bold;
        }
        
        .close-button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #3742fa;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        
        .close-button:hover {
            background-color: #2c3aef;
        }
        
        .how-to-play {
            margin-top: 20px;
            letter-spacing: 2px;
            background-color: #232323f4;
            min-width: 60px;
        }
        
        .divider {
            height: 5px;
            width: 85%;
            max-width: 400px;
            margin: 15px auto;
            border: 0;
            border-radius: 2px;
            background: linear-gradient(
                to right,
                #ff5d11,
                hsl(163, 100%, 50%),
                #f531c0
            );
        }
        
        .game-over-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
        }
        
        .game-over-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 10% auto;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            border-radius: 20px;
            text-align: center;
            color: white;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .game-over-content h2 {
            font-family: "Press Start 2P", cursive;
            font-size: 32px;
            margin-bottom: 30px;
            text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.3);
        }
        
        .final-scores {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .final-team-score {
            font-size: 20px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .winner-highlight {
            background: rgba(255, 215, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
            margin-top: 5px;
            animation: glow 2s ease-in-out infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
        }
        
        /* Mobile Portrait Mode - Fullscreen */
        @media (max-width: 768px) and (orientation: portrait) {
            body {
                background: linear-gradient(155deg, #a98affdd 0%, #c3cfe2 100%);
                padding: 0;
                margin: 0;
            }
            
            .game-container {
                width: 100vw;
                height: 100vh;
                padding: 10px;
                border-radius: 0;
                box-shadow: none;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                min-height: unset;
                box-sizing: border-box;
            }
            
            .board-container,
            .board,
            .target-area,
            .needle-container {
                width: min(85vw, 350px);
                height: min(85vw, 350px);
                margin-bottom: 50px;
            }
            
            .needle {
                height: min(42.5vw, 165px);
            }
            
            .hanging-title {
                font-size: min(8vw, 32px);
                padding: 10px 20px;
            }
            
            .title-container {
                height: 50px;
                margin-bottom: 20px;
                margin-top: -5px;
            }
            
            .category-label {
                font-size: 10px;
                padding: 6px 8px;
                width: 90px;
                min-height: 35px;
            }
            
            .category-label.top {
                top: -25px;
            }
            
            .category-label.bottom {
                bottom: -25px;
            }
            
            .category-label.left {
                left: -30px;
            }
            
            .category-label.right {
                right: -30px;
            }
            
            button {
                font-size: 12px;
                padding: 10px 15px;
                max-width: 30%;
            }
            
            .controls {
                gap: 5px;
                margin-top: 25px;
                margin-bottom: 10px;
            }
            
            #score, #totalScore {
                font-size: 16px;
                margin-top: 10px;
            }
            
            .team-score {
                font-size: 14px;
                padding: 6px 12px;
            }
            
            .round-cover-text {
                font-size: 24px;
            }
            
            .round-cover-button {
                font-size: 16px;
                padding: 12px 30px;
            }
            
            .modal-content {
                margin: 5% auto;
                padding: 15px;
                width: 95%;
            }
            
            .modal h2 {
                font-size: 20px;
            }
            
            .modal-body {
                font-size: 13px;
            }
            
            .mode-button {
                font-size: 12px;
                padding: 8px 12px;
            }
            
            .round-counter {
                font-size: 14px;
                margin-bottom: 10px;
            }
        }
        
        /* Mobile Landscape Mode */
        @media (max-width: 768px) and (orientation: landscape) {
            .game-container {
                padding: 0.5rem;
                min-height: unset;
            }
            
            .board-container,
            .board,
            .target-area,
            .needle-container {
                width: 250px;
                height: 250px;
                margin-bottom: 40px;
            }
            
            .needle {
                height: 115px;
            }
            
            .hanging-title {
                font-size: 24px;
                padding: 8px 16px;
            }
            
            .title-container {
                height: 40px;
                margin-bottom: 10px;
            }
            
            .category-label {
                font-size: 11px;
                padding: 4px 6px;
                width: 80px;
                min-height: 30px;
            }
            
            .category-label.top {
                top: -25px;
            }
            
            .category-label.bottom {
                bottom: -25px;
            }
            
            .category-label.left {
                left: -30px;
            }
            
            .category-label.right {
                right: -30px;
            }
            
            
            button {
                font-size: 12px;
                padding: 6px 12px;
            }
            
            .controls {
                margin-top: 20px;
            }
            
            #score, #totalScore {
                font-size: 14px;
                margin-top: 5px;
            }
            
            .team-score {
                font-size: 12px;
                padding: 4px 8px;
            }
            
            .mode-button {
                font-size: 11px;
                padding: 6px 10px;
            }
            
            .round-counter {
                font-size: 12px;
                padding: 4px 8px;
                margin-bottom: 10px;
            }
        }
    </style>
</head>

<body>
    <div id="roundCoverOverlay" class="round-cover-overlay">
        <div class="round-cover-text">Hinweisperson bitte!</div>
        <button class="round-cover-button" id="startRoundButton">Bereit!</button>
    </div>
    <div id="guessCoverOverlay" class="round-cover-overlay">
    <div class="round-cover-text">Ratende Person bitte</div>
    <button class="round-cover-button" id="startGuessButton">Bereit!</button>
    </div>
    <div id="howToPlayModal" class="modal">
        <div class="modal-content">
            <h2>Wie spielt man VibeKreis?</h2>
            <div class="modal-body">
                <ol>
                    <li>Vier Kategorien werden um den Kreis angezeigt (oben = blau, rechts = rot, unten = grÃ¼n, links = gelb).</li>
                    <li>Es gibt zwei Rollen: Eine "Gedankenlesesende/Hinweis- Person" und eine "Drehende Person"</li>
                    <li>Die "Hinweisperson" sieht zuerst die Kategorien und das Ziel alleine.</li>
                    <li>Diese Person gibt einen Hinweis, wo sich das Ziel im Kreis befindet. Der Hinweis darf die KategoriewÃ¶rter nicht benutzen!</li>
                    <li>Die "Hinweisperson" klickt auf "Ziel verbergen" und reicht dann weiter.</li>
                    <li>Die andere Person im Team entscheidet, wohin der Zeiger gedreht wird.</li>
                    <li>Die Dreht und zieht den Zeiger, um die Vermutung einzustellen.</li>
                    <li>Dann wird auf "Ziel aufdecken" geklickt, um zu sehen, wie nah der Zeiger an dem Ziel im Kreis dran ist.</li>
                    <li>Punktevergabe:
                        <ul>
                            <li><span class="score-5">5 Punkte:</span> Volltreffer (gold - winziger Bereich)</li>
                            <li><span class="score-3">3 Punkte:</span> Nah dran (blau - kleiner Bereich)</li>
                            <li><span class="score-1">1 Punkt:</span> In der NÃ¤he (rot - mittlerer Bereich)</li>
                            <li><span class="score-0">0 Punkte:</span> Daneben (grau)</li>
                        </ul>
                    </li>
                    <li>WÃ¤hlt zwischen Endlosspiel oder 5-Runden-Modus.</li>
                    <li>Klickt auf "NÃ¤chste Runde", um fortzufahren.</li>
                </ol>
            </div>
            <button class="close-button">Okay!</button>
        </div>
    </div>
    
    <div id="gameOverModal" class="game-over-modal">
        <div class="game-over-content">
            <h2>Spielende! ðŸŽ‰</h2>
            <div class="final-scores" id="finalScores"></div>
            <button class="close-button" onclick="location.reload()">Neues Spiel</button>
        </div>
    </div>
    
    <div id="teamSetup" class="team-setup">
        <div class="title-container">
            <h1 class="hanging-title">VibeKreis</h1>
        </div>
        <h2>
            Sprache: <img src="https://flagcdn.com/de.svg" width="35" alt="Germany">
        </h2>
        <h3 class="divider"></h3>
        <h4>Teameinstellung</h4>
        <div class="team-count">
            <label for="teamCount">Anzahl der Teams:</label>
            <select id="teamCount">
                <option value="1" selected>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        <div class="count-error-message" id="countErrorMessage"></div>
        <div id="teamNames"></div>
        <div class="error-message" id="errorMessage"></div>
        <h4 class="divider"></h4>
        <h5>Spielmodus</h5>
        <div class="game-mode-selector">
            <button class="mode-button active" data-mode="endless">Endlos</button>
            <button class="mode-button" data-mode="rounds">5 Runden</button>
        </div>
        <button id="startGame">Starte!</button>
        <button id="howToPlayButton" class="how-to-play">?</button>
    </div>
    
    <div class="game-container" style="display: none;">
        <div class="title-container">
            <h1 class="hanging-title">VibeKreis</h1>
        </div>
        <div class="round-counter" id="roundCounter" style="display: none;">Runde: 1 / 5</div>
        <div class="board-container">
            <div class="board">
                <div class="target-area" id="targetArea"></div>
                <div class="needle-container" id="needleContainer">
                    <div class="needle" id="needle"></div>
                    <div class="needle-center"></div>
                </div>
            </div>
            <div class="category-labels">
                <div class="category-label top" id="topCategory"></div>
                <div class="category-label right" id="rightCategory"></div>
                <div class="category-label bottom" id="bottomCategory"></div>
                <div class="category-label left" id="leftCategory"></div>
            </div>
        </div>
        <div class="controls">
            <button id="toggleButton">Ziel verbergen</button>
            <button id="nextRoundButton" style="display: none;">NÃ¤chste Runde</button>
            <button id="newGameButton" style="background-color: rgba(208, 36, 36, 0.822); color: white">
                Neues Spiel
            </button>
        </div>
        <div id="score"></div>
        <div id="totalScore">Gesamtpunktzahl: 0</div>
    </div>
    
    <script>
        const needleContainer = document.getElementById("needleContainer");
        const needle = document.getElementById("needle");
        const targetArea = document.getElementById("targetArea");
        const toggleButton = document.getElementById("toggleButton");
        const nextRoundButton = document.getElementById("nextRoundButton");
        const newGameButton = document.getElementById("newGameButton");
        const scoreElement = document.getElementById("score");
        const totalScoreElement = document.getElementById("totalScore");
        const roundCoverOverlay = document.getElementById("roundCoverOverlay");
        const startRoundButton = document.getElementById("startRoundButton");
        const errorMessageElement = document.getElementById("errorMessage");
        const countErrorMessageElement = document.getElementById("countErrorMessage");
        const roundCounter = document.getElementById("roundCounter");
        const gameOverModal = document.getElementById("gameOverModal");
        const finalScoresDiv = document.getElementById("finalScores");
        const guessCoverOverlay = document.getElementById("guessCoverOverlay");
        const startGuessButton = document.getElementById("startGuessButton");

        // Kategorien-Elemente
        const topCategory = document.getElementById("topCategory");
        const rightCategory = document.getElementById("rightCategory");
        const bottomCategory = document.getElementById("bottomCategory");
        const leftCategory = document.getElementById("leftCategory");
        
        let isDragging = false;
        let targetAngle = 0;
        let isTargetVisible = true;
        let totalScore = 0;
        let canMoveNeedle = false;
        let currentNeedleAngle = 0;
        let gameMode = 'endless';
        let currentRound = 1;
        let currentTurn = 0;
        let maxRounds = 5;
        let usedCategories = new Set();
        let isFirstRound = true;
        
        const bannedWords = [
            'nigger', 'nigga', 'neger', 'n+[i1!]+[g9]+', 'n.{0,2}[i1!].{0,2}[g9].{0,2}[g9]',
            'hitler', 'h[i1!]tl[e3]r', 'nazi', 'n[a4]z[i1!]', 'heil', 'nsdap', 'fÃ¼hrer', 'adolf',
            'hurensohn', 'hure', 'fotze', 'f[o0]tz[e3]', 'schlampe', 'missgeburt',
            'spast', 'sp[a4]st', 'behindert', 'mongo', 'mongol', 'schwuchtel', 'faggot', 'f[a4]gg[o0]t','fag', 'f[a4]g',
            'judensau', 'jud[e3]ns[a4]u', 'zigeuner'
        ];
            
        function isNameBanned(name) {
            const lowerName = name.toLowerCase().trim();
            const cleanedName = lowerName.replace(/[\s\-_\.]/g, '');
            const decodedName = cleanedName
                .replace(/0/g, 'o')
                .replace(/1/g, 'i')
                .replace(/3/g, 'e')
                .replace(/4/g, 'a')
                .replace(/5/g, 's')
                .replace(/7/g, 't')
                .replace(/9/g, 'g');
            
            return bannedWords.some(banned => {
                try {
                    const pattern = new RegExp(banned, 'i');
                    return pattern.test(lowerName) || 
                            pattern.test(cleanedName) ||
                            pattern.test(decodedName);
                } catch (e) {
                    return lowerName.includes(banned) || 
                            cleanedName.includes(banned) ||
                            decodedName.includes(banned);
                }
            });
        }
            
        function checkForDuplicateNames() {
            const inputs = Array.from(teamNames.children);
            const names = inputs.map(input => input.value.toLowerCase().trim()).filter(name => name);
            const uniqueNames = new Set(names);
            return names.length !== uniqueNames.size;
        }
            
        function normalizeAngle(angle) {
            angle = angle % 360;
            if (angle < 0) angle += 360;
            return angle;
        }
        
        const categories = [
            ["Kalt", "HeiÃŸ", "Trocken", "Feucht"],
            ["Langweilig", "Aufregend", "Entspannend", "Stressig"],
            ["Billig", "Teuer", "Wertvoll", "Wertlos"],
            ["Alt", "Neu", "Zeitlos", "Trendig"],
            ["SÃ¼ÃŸ", "Sauer", "Bitter", "Salzig"],
            ["Laut", "Leise", "Harmonisch", "Chaotisch"],
            ["Hart", "Weich", "Flexibel", "Starr"],
            ["Schnell", "Langsam", "Konstant", "Variabel"],
            ["Dunkel", "Hell", "Bunt", "Einfarbig"],
            ["NatÃ¼rlich", "KÃ¼nstlich", "Organisch", "Synthetisch"],
            ["Einfach", "Komplex", "Intuitiv", "Verwirrend"],
            ["GroÃŸ", "Klein", "Mittel", "Extrem"],
            ["Schwer", "Leicht", "Dicht", "Luftig"],
            ["Glatt", "Rau", "Wellig", "Eckig"],
            ["Modern", "Traditionell", "Futuristisch", "Retro"],
            ["Mutig", "Vorsichtig", "Riskant", "Sicher"],
            ["Formal", "Casual", "Elegant", "LÃ¤ssig"],
            ["Digital", "Analog", "Hybrid", "Mechanisch"],
            ["Gesund", "Ungesund", "Nahrhaft", "Leer"],
            ["Stark", "Schwach", "Robust", "Fragil"],
            ["Nah", "Fern", "Erreichbar", "Unerreichbar"],
            ["Ã–ffentlich", "Privat", "Gemeinschaftlich", "Individuell"],
            ["Rational", "Emotional", "Logisch", "Intuitiv"],
            ["Aktiv", "Passiv", "Dynamisch", "Statisch"],
            ["Sauber", "Schmutzig", "Steril", "Unordentlich"],
            ["Jung", "Alt", "Reif", "Unreif"],
            ["Bekannt", "Unbekannt", "BerÃ¼hmt", "Obskur"],
            ["NÃ¼tzlich", "Nutzlos", "Praktisch", "Dekorativ"],
            ["Echt", "Falsch", "Authentisch", "Imitiert"],
            ["Positiv", "Negativ", "Neutral", "Polarisierend"],
            ["Innen", "AuÃŸen", "Zentral", "Peripher"],
            ["Offen", "Geschlossen", "ZugÃ¤nglich", "Versperrt"],
            ["Voll", "Leer", "ÃœberfÃ¼llt", "SpÃ¤rlich"],
            ["SeriÃ¶s", "Lustig", "Ernst", "Albern"],
            ["Professionell", "Amateurhaft", "Experte*in", "AnfÃ¤nger*in"],
            ["Urban", "LÃ¤ndlich", "VorstÃ¤dtisch", "Wildnis"],
            ["Sommer", "Winter", "FrÃ¼hling", "Herbst"],
            ["Nord", "SÃ¼d", "Ost", "West"],
            ["Himmel", "Erde", "Wasser", "Feuer"],
            ["GlÃ¼cklich", "Traurig", "WÃ¼tend", "Friedlich"],
            ["Erfolgreich", "Gescheitert", "MittelmÃ¤ÃŸig", "AuÃŸergewÃ¶hnlich"],
            ["Freundlich", "Feindlich", "Neutral", "Aggressiv"],
            ["Kreativ", "Analytisch", "KÃ¼nstlerisch", "Wissenschaftlich"],
            ["Spontan", "Geplant", "Improvisiert", "Strukturiert"],
            ["Minimalistisch", "Maximalistisch", "Schlicht", "Ãœberladen"],
            ["Mainstream", "Alternative", "PopulÃ¤r", "Nische"],
            ["Lokal", "Global", "Regional", "International"],
            ["GewÃ¶hnlich", "AuÃŸergewÃ¶hnlich", "Normal", "Speziell"],
            ["Scharf", "Mild", "WÃ¼rzig", "Fade"],
            ["Frisch", "Abgestanden", "Knusprig", "Matschig"],
            ["Transparent", "Undurchsichtig", "Klar", "TrÃ¼b"],
            ["Maskulin", "Feminin", "Neutral", "Androgyn"],
            ["Ordentlich", "Chaotisch", "Strukturiert", "ZufÃ¤llig"],
            ["Vertraut", "Fremd", "Heimisch", "Exotisch"],
            ["OberflÃ¤chlich", "TiefgrÃ¼ndig", "Flach", "Komplex"],
            ["Introvertiert", "Extrovertiert", "Charismatisch", "ZurÃ¼ckhaltend"],
            ["Optimistisch", "Pessimistisch", "Realistisch", "TrÃ¤umerisch"],
            ["Sparsam", "Verschwenderisch", "GroÃŸzÃ¼gig", "Geizig"],
            ["PÃ¼nktlich", "UnpÃ¼nktlich", "ÃœberpÃ¼nktlich", "Immer zu spÃ¤t"],
            ["Geduldig", "Ungeduldig", "Gelassen", "NervÃ¶s"],
            ["Abenteuerlich", "Ã„ngstlich", "Wagemutig", "Sicherheitsorientiert"],
            ["Selbstbewusst", "Unsicher", "Arrogant", "Bescheiden"],
            ["Hilfsbereit", "Egoistisch", "Selbstlos", "EigennÃ¼tzig"],
            ["Kultur-Kenner*in", "Kultur-Banaus*in", "Hochkultur", "Popkultur"],
            ["Tierliebend", "Tierfeindlich", "Katzenmensch", "Hundemensch"],
            ["Morgenmensch", "Nachtmensch", "Mittagstief", "Immer aktiv"],
            ["Kaffee-Junkie", "Tee-Liebhaber*in", "Wasser-Trinker*in", "Energy-Drink-Fan"],
            ["Sportskanone", "Couch-Potato", "Fitness-Fanatiker*in", "Bewegungsmuffel"],
            ["Technik-Affin", "Technik-Skeptiker*in", "Early Adopter", "Analog-Fan"],
            ["Risikofreudig", "Sicherheitsliebend", "Adrenalin-Junkie", "Angsthase"],
            ["Multitasking-Profi", "Fokus-Meister*in", "StÃ¤ndig Ã¼berfordert", "Tiefenentspannt"],
            ["Naturverbunden", "Stadtmensch", "Wander-Fan", "Stubenhocker*in"],
            ["Musik-Allesfresser*in", "Stille-GenieÃŸer*in", "Konzert-GÃ¤nger*in", "LÃ¤rmempfindlich"],
            ["BÃ¼cherwurm", "Serien-Junkie", "Film-Fan", "Podcast-HÃ¶rer*in"],
            ["Reiselustig", "Heimatverbunden", "Backpacker*in", "Luxus-Urlauber*in"],
            ["Koch-KÃ¼nstler*in", "Lieferdienst-KÃ¶nig*in", "Hobby-BÃ¤cker*in", "Mikrowellen-Magier*in"],
            ["Umweltbewusst", "Konsum-Enthusiast*in", "Zero-Waste-Held*in", "Verpackungs-Liebhaber*in"],
            ["Zwei linke HÃ¤nde", "DIY-KÃ¶nig*in","Handwerklich begabt" ,"Reparatur-Muffel"],
            ["Gamer*in", "Brettspiel-Fan", "Social-Media-Star", "Digital-Detox-AnhÃ¤nger*in"],
            ["QualitÃ¤tsbewusst", "SchnÃ¤ppchen-JÃ¤ger*in", "Markentreu", "No-Name-Fan"],
            ["Planungs-Fanatiker*in", "SpontaneitÃ¤ts-KÃ¼nstler*in", "To-Do-Listen-Gott", "YOLO-MentalitÃ¤t"],
            ["Diskussionsfreudig", "Konfliktscheu", "Debattier-Club-PrÃ¤sident*in", "HarmoniesÃ¼chtig"],
            ["KritikfÃ¤hig", "DÃ¼nnhÃ¤utig", "Selbstreflektiert", "Beratungsresistent"],
            ["Kompromissbereit", "Stur", "Diplomat*in", "Rechthaber*in"],
            ["Innovativ", "Traditionsbewusst", "VisionÃ¤r*in", "Nostalgiker*in"],
            ["Detailorientiert", "GroÃŸes Ganzes-Denker*in", "Mikro-Manager*in", "Ãœberblick-Bewahrer*in"],
            ["Entscheidungsfreudig", "EntscheidungsunfÃ¤hig", "Durchsetzungsstark", "Unentschlossen"],
            ["Humorvoll", "Todernst", "Sarkastisch", "Albern"],
            ["Belastbar", "StressanfÃ¤llig", "Fels in der Brandung", "NervenbÃ¼ndel"],
            ["Lernbegierig", "Lernfaul", "Wissensdurstig", "Desinteressiert"],
            ["Achtsam", "Gedankenverloren", "Im Hier und Jetzt", "StÃ¤ndig abgelenkt"],
            ["Diszipliniert", " undiszipliniert", "Willensstark", "Prokrastinierend"],
            ["Verantwortungsbewusst", "Verantwortungslos", "Pflichtbewusst", "Leichtsinnig"],
            ["Team-Player*in", "EinzelkÃ¤mpfer*in", "Kooperativ", "Kompetitiv"],
            ["FÃ¼hrungspersÃ¶nlichkeit", "MitlÃ¤ufer*in", "AutoritÃ¤r", "Demokratisch"],
            ["Eine gute Tat", "Eine bÃ¶se Tat", "Eine notwendige Tat", "Eine nutzlose Tat"],
            ["Wissen", "Glaube", "Meinung", "Fakt"],
            ["Freiheit", "Sicherheit", "Ordnung", "Chaos"],
            ["Schicksal", "Zufall", "Freier Wille", "Vorhersehung"],
            ["Utopie", "Dystopie", "RealitÃ¤t", "Fantasie"],
            ["Vergangenheit", "Zukunft", "Gegenwart", "Alternative Zeitlinie"],
            ["Eine unterschÃ¤tzte Idee", "Eine Ã¼berschÃ¤tzte Idee", "Eine gefÃ¤hrliche Idee", "Eine geniale Idee"],
            ["Wahrheit", "LÃ¼ge", "Geheimnis", "GerÃ¼cht"],
            ["Blockbuster", "Indie-Film", "Dokumentation", "Kurzfilm"],
            ["Ohrwurm", "Vergessenswerter Song", "Guilty Pleasure", "Klassiker"],
            ["Gutes Meme", "Cringe Meme", "Totes Meme", "Insider-Witz"],
            ["Gute Buchverfilmung", "Schlechte Buchverfilmung", "Besser als das Buch", "Unverfilmbar"],
            ["50er-Nostalgie", "90er-Nostalgie", "2000er-Nostalgie", "Zukunfts-Hype"],
            ["So schlecht, dass es gut ist", "Unfreiwillig komisch", "Einfach nur schlecht", "Meisterwerk"],
            ["Ist ein Sandwich?", "Ist eine Suppe?", "Ist ein Salat?", "Ist ein Verbrechen?"],
            ["Riecht besser als es schmeckt", "Schmeckt besser als es riecht", "Sieht gut aus", "Klingt gut"],
            ["Guter Ort fÃ¼r ein Nickerchen", "Schlechter Ort fÃ¼r ein Nickerchen", "Ort zum Verstecken", "Ort fÃ¼r eine Party"],
            ["Normal im Mittelalter", "Normal heute", "Normal in 100 Jahren", "Niemals normal"],
            ["Braucht Batterien", "Braucht WLAN", "Braucht Liebe", "Braucht keine Anleitung"],
            ["Eine Aktion einer Katze", "Eine Aktion eines Hundes", "Eine Aktion eines Menschen", "Eine Aktion einer KI"],
            ["Sollte illegal sein", "Sollte Pflicht sein", "Ist legal", "Ist eine Grauzone"],
            ["Etwas, das man flÃ¼stert", "Etwas, das man schreit", "Etwas, das man singt", "Etwas, das man denkt"],
            ["Kopfentscheidung", "Bauchentscheidung", "Herzentscheidung", "Zufallsentscheidung"],
            ["TemporÃ¤r", "Permanent", "Zyklisch", "Einmalig"],
            ["Fertigkeit", "Talent", "Wissen", "GlÃ¼ck"],
            ["Ein Geruch, der beruhigt", "Ein Geruch, der nervt", "Ein vertrauter Geruch", "Ein neuer Geruch"],
            ["Etwas, das man sammelt", "Etwas, das man wegwirft", "Etwas, das man recycelt", "Etwas, das man vergisst"],
            ["Happy End", "Trauriges Ende", "Offenes Ende", "Plot-Twist am Ende"],
            ["Ein GerÃ¤usch, das beruhigt", "Ein GerÃ¤usch, das nervt", "Ein lautes GerÃ¤usch", "Absolute Stille"],
            ["Etwas aus Holz", "Etwas aus Metall", "Etwas aus Plastik", "Etwas aus Glas"],
            ["Street Smart", "Book Smart", "Emotionale Intelligenz", "Kreative Intelligenz"],
            ["Ein Grund zu feiern", "Ein Grund zu trauern", "Ein normaler Dienstag", "Ein nationaler Feiertag"],
            ["Ein Wort, das klug klingt", "Ein Wort, das dumm klingt", "Ein Schimpfwort", "Ein Kosewort"],
            ["Ein Job fÃ¼r eine Maschine", "Ein Job fÃ¼r eine*n KÃ¼nstler*in", "Ein Job fÃ¼r eine*n Politiker*in", "Ein Job, den es nicht mehr gibt"],
            ["Ein Ort, an dem man allein sein will", "Ein Ort fÃ¼r eine riesige Party", "Ein geheimer Ort", "Ein Ã¼berfÃ¼llter Ort"],
            ["Eine Regel, die man brechen sollte", "Eine Regel, die man befolgen sollte", "Eine ungeschriebene Regel", "Eine dumme Regel"],
            ["Pizza", "Rakete", "Kissen", "Dinosaurier"], // Ab hier sind random Kategorien
            ["Banane", "Fahrrad", "Wolke", "Socke"],
            ["KÃ¤se", "Hubschrauber", "Regenschirm", "Gitarre"],
            ["Kaktus", "Laptop", "Seife", "Pinguin"],
            ["Toaster", "Einhorn", "Ketchup", "Mondschein"],
            ["Glitzer", "Kartoffel", "Skateboard", "Vampire"],
            ["Konfetti", "Brokkoli", "Raumschiff", "Pantoffel"],
            ["Nudeln", "Drache", "Wecker", "Regenbogen"],
            ["Popcorn", "Roboter", "Handtuch", "Geister"],
            ["Kaugummi", "Leuchtturm", "Avocado", "Trampolin"],
            ["Wassermelone", "Zauberstab", "Staubsauger", "Flamingo"],
            ["Luftballon", "Burrito", "Teleskop", "Yeti"],
            ["GlÃ¼hbirne", "Ananas", "Rollschuhe", "Kraken"],
            ["Donut", "Jetpack", "ZahnbÃ¼rste", "Ninja"],
            ["Sushi", "Bumerang", "KÃ¼hlschrank", "Meerjungfrau"],
            ["Muffin", "Helikopter", "Radiergummi", "Wikinger"],
            ["Popcorn", "U-Boot", "Klopapier", "Astronaut"],
            ["Waffel", "Drohne", "Shampoo", "Pirat"],
            ["Cookie", "Zeitmaschine", "Bleistift", "Zombie"],
            ["Chips", "Katapult", "Spiegel", "Elfe"],
            ["Brezel", "Hoverboard", "Zahnpasta", "Cowboy"],
            ["Marshmallow", "Portal", "Handschuhe", "Detektiv"],
            ["GummibÃ¤rchen", "Laserkanone", "Kissen", "Samurai"],
            ["Schokolade", "Teleporter", "Seifenblase", "Zauberer"],
            ["Internet", "Kartoffelsalat", "Discokugel", "T-Rex"],
            ["Bitcoin", "Knoblauch", "Lavalampe", "Sherlock Holmes"],
            ["TikTok", "Basilikum", "HÃ¤ngematte", "Godzilla"],
            ["Podcast", "Mayonnaise", "Boombox", "Harry Potter"],
            ["Emoji", "Zimt", "Gameboy", "Batman"],
            ["Hashtag", "Senf", "Walkman", "Spiderman"],
            ["Meme", "Paprika", "Schallplatte", "Gandalf"],
            ["Selfie", "Curry", "Kassette", "Dumbledore"],
            ["Stream", "Wasabi", "Diskette", "Darth Vader"],
            ["Download", "Tabasco", "Polaroid", "Joker"],
            ["Update", "Pfeffer", "Videokassette", "Iron Man"],
            ["Cloud", "Salz", "CD-Player", "Hulk"],
            ["Swipe", "Zucker", "iPod", "Thor"],
            ["Like", "Essig", "Pager", "Captain America"],
            ["Story", "Ã–l", "Fax", "Wonder Woman"],
            ["Feed", "Butter", "Modem", "Superman"],
            ["Montag", "Giraffe", "Klebeband", "Vulkan"],
            ["Dienstag", "Elefant", "BÃ¼roklammer", "Tornado"],
            ["Mittwoch", "Koala", "HeftgerÃ¤t", "Blitz"],
            ["Donnerstag", "Panda", "Locher", "Regenbogen"],
            ["Freitag", "Zebra", "Textmarker", "Aurora"],
            ["Stift", "Pelican", "Post-it", "Permanent Marker"],
            ["Sonntag", "Tiger", "Tesafilm", "Meteror"],
            ["Januar", "Adler", "Kugelschreiber", "Galaxie"],
            ["Dezember", "Hai", "FÃ¼ller", "Schwarzes Loch"],
            ["Ostern", "Delfin", "Bleistift", "Supernova"],
            ["Weihnachten", "Wal", "Edding", "MilchstraÃŸe"],
            ["Halloween", "Oktopus", "Kreide", "Urknall"],
            ["Silvester", "Seepferdchen", "Wachsmaler", "Paralleluniversum"],
            ["Karneval", "Fasching", "Fastnacht", "KostÃ¼mtag"],
            ["Valentinstag", "Seestern", "Buntstift", "Wurmloch"],
            ["Muttertag", "Krabbe", "Filzstift", "Multiversum"],
            ["Netflix", "Klopapier 2020", "Zoom-Meeting", "Sourdough"],
            ["Clubhouse", "Toilettenpapier-Hamster", "Home Office", "Bananenbrot"],
            ["NFT", "Maske", "Teams-Call", "Tiger King"],
            ["Metaverse", "Desinfektionsmittel", "Mute-Button", "Among Us"],
            ["ChatGPT", "Impfung", "Webcam", "Squid Game"],
            ["BeReal", "PCR-Test", "Pyjama-Hose", "Wordle"],
            ["Threads", "Lockdown", "Zoom-Fatigue", "Dalgona-Kaffee"],
            ["Smartphone", "Buch", "Kaffeemaschine", "KopfhÃ¶rer"],
            ["Festival", "Konferenz", "Familienfeier", "Erster Schultag"],
            ["Selfie", "Spiegel", "Filter", "RealitÃ¤t"],
            ["Homeoffice", "GroÃŸraumbÃ¼ro", "Coworking Space", "CafÃ©"],
            ["Online-Dating", "Real-Life-Date", "Ghosting", "Langzeitbeziehung"],
            ["Influencer", "Wissenschaftler*in", "Politiker*in", "Comedian"],
            ["E-Scooter", "Fahrrad", "Auto", "Zug"],
            ["Bergurlaub", "Strandurlaub", "StÃ¤dtereise", "Zuhause bleiben"],
            ["Regen", "Sonne", "Schnee", "Wind"],
            ["Kunst", "Sport", "Wissenschaft", "Mode"],
            ["Start-up", "BehÃ¶rde", "Konzern", "Familienbetrieb"],
            ["Science-Fiction", "Fantasy", "Krimi", "Romantik"],
            ["Reality-TV", "Dokumentation", "Comedyshow", "Nachrichten"],
            ["Nachbar*in", "Kolleg*in", "Freund*in", "Familienmitglied"],
            ["Kaum zu glauben", "SelbstverstÃ¤ndlich", "FragwÃ¼rdig", "UnverstÃ¤ndlich"],
            ["Zukunftsvision", "Erinnerung", "Alltag", "Albtraum"],
            ["Perfektion", "Chaos", "Improvisation", "KreativitÃ¤t"],
            ["Pizza", "Rakete", "Kissen", "Dinosaurier"],
            ["Banane", "Fahrrad", "Wolke", "Socke"],
            ["KÃ¤se", "Hubschrauber", "Regenschirm", "Gitarre"],
            ["Kaktus", "Laptop", "Seife", "Pinguin"],
            ["Toaster", "Einhorn", "Ketchup", "Mondschein"],
            ["Glitzer", "Kartoffel", "Skateboard", "Vampir"],
            ["Konfetti", "Brokkoli", "Raumschiff", "Schlafanzug"],
            ["Nudeln", "Drache", "Wecker", "Regenbogen"],
            ["Kaugummi", "Leuchtturm", "Avocado", "Trampolin"],
            ["Wassermelone", "Zauberstab", "Staubsauger", "Flamingo"],
            ["GlÃ¼hbirne", "Ananas", "Rollschuhe", "Krake"],
            ["Sushi", "Bumerang", "KÃ¼hlschrank", "Meerjungfrau"],
            ["Cookie", "Zeitmaschine", "Bleistift", "Zombie"],
            ["Donut", "Jetpack", "ZahnbÃ¼rste", "Ninja"],
            ["Soooos", "Sase", "Seees", "Frohes Neues Jahr fÃ¼r dich"],
            ["Happy End","Freunde+","Solingen","Mark Forster"]
        ];
        
        const teamSetup = document.getElementById('teamSetup');
        const teamCount = document.getElementById('teamCount');
        const teamNames = document.getElementById('teamNames');
        const startGameButton = document.getElementById('startGame');
        const gameContainer = document.querySelector('.game-container');
        
        let teams = [];
        let currentTeamIndex = 0;
        
        // Game mode selection
        document.querySelectorAll('.mode-button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.mode-button').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                gameMode = this.dataset.mode;
            });
        });
        
        teamCount.addEventListener('change', updateTeamInputs);
        teamCount.addEventListener('input', updateTeamInputs);
        
        function updateTeamInputs() {
            const count = parseInt(teamCount.value);
            
            teamCount.classList.remove('error');
            countErrorMessageElement.classList.remove('show');
            countErrorMessageElement.textContent = '';
            
            if (count < 1 || isNaN(count)) {
                teamCount.classList.add('error');
                countErrorMessageElement.textContent = 'Bitte wÃ¤hle mindestens 1 Team.';
                countErrorMessageElement.classList.add('show');
                teamCount.value = 1;
                teamNames.innerHTML = '';
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = `Name des 1. Teams`;
                input.className = 'team-name-input';
                teamNames.appendChild(input);
                return;
            }
            if (count > 4) {
                teamCount.classList.add('error');
                countErrorMessageElement.textContent = 'Maximal 4 Teams sind erlaubt.';
                countErrorMessageElement.classList.add('show');
                teamCount.value = 4;
            }
            
            const finalCount = Math.min(4, Math.max(1, count));
            teamNames.innerHTML = '';
            for (let i = 0; i < finalCount; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = `Name des ${i + 1}. Teams`;
                input.className = 'team-name-input';
                teamNames.appendChild(input);
            }
        }
        
        function updateScoreDisplay() {
            const scoreHTML = teams.map((team, index) =>
                `<div class="team-score ${index === currentTeamIndex ? 'current-team' : ''}">
                    ${team.name}: ${team.score}
                </div>`
            ).join('');
            totalScoreElement.innerHTML = scoreHTML;
        }
        
        function updateRoundCounter() {
            if (gameMode === 'rounds') {
                roundCounter.style.display = 'inline-block';
                roundCounter.textContent = `Runde: ${currentRound} / ${maxRounds}`;
            } else {
                roundCounter.style.display = 'none';
            }
        }
        
        function showGameOver() {
            const sortedTeams = [...teams].sort((a, b) => b.score - a.score);
            const highestScore = sortedTeams[0].score;
            const winners = sortedTeams.filter(team => team.score === highestScore);
            
            let scoresHTML = sortedTeams.map((team) => {
                const isWinner = team.score === highestScore;
                return `<div class="final-team-score ${isWinner ? 'winner-highlight' : ''}">
                    ${isWinner ? 'ðŸ† ' : ''}${team.name}: ${team.score} Punkte
                </div>`;
            }).join('');
            
            finalScoresDiv.innerHTML = scoresHTML;
            gameOverModal.style.display = 'block';
            
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 200,
                    spread: 120,
                    origin: { y: 0.4 },
                    colors: ['#FFD700', '#feca57', '#3742fa', '#ff6b6b'],
                    ticks: 400,
                    gravity: 0.6
                });
            }
        }
        
        function showRoundCover() {
            roundCoverOverlay.classList.add('show');
            roundCoverOverlay.style.display = 'flex';
        }
        
        function hideRoundCover() {
            roundCoverOverlay.classList.remove('show');
            setTimeout(() => {
                roundCoverOverlay.style.display = 'none';
            }, 300);
        }
        
        startRoundButton.addEventListener('click', () => {
            hideRoundCover();

            // Zeige jetzt das Target und die Kategorien
            targetArea.style.display = "block";
            isTargetVisible = true;
            showCategories();
            toggleButton.style.display = "inline-block";
            toggleButton.textContent = "Ziel verbergen";
        });
        
        startGuessButton.addEventListener('click', () => {
            guessCoverOverlay.classList.remove('show');
            setTimeout(() => {
                guessCoverOverlay.style.display = 'none';
            }, 300);
            // Zeige nur den Toggle-Button und die Nadel
            toggleButton.style.display = "inline-block";
            toggleButton.textContent = "Ziel aufdecken";
            showNeedle();
            canMoveNeedle = true;
        });
        function showCategories() {
            topCategory.classList.add('visible');
            rightCategory.classList.add('visible');
            bottomCategory.classList.add('visible');
            leftCategory.classList.add('visible');
        }
        
        function hideCategories() {
            topCategory.classList.remove('visible');
            rightCategory.classList.remove('visible');
            bottomCategory.classList.remove('visible');
            leftCategory.classList.remove('visible');
        }
        
        startGameButton.addEventListener('click', () => {
            errorMessageElement.classList.remove('show');
            errorMessageElement.textContent = '';
            Array.from(teamNames.children).forEach(input => input.classList.remove('error'));
            
            const count = parseInt(teamCount.value);
            if (count < 1 || count > 4 || isNaN(count)) {
                teamCount.classList.add('error');
                countErrorMessageElement.textContent = 'Bitte wÃ¤hle eine gÃ¼ltige Teamanzahl (1-4).';
                countErrorMessageElement.classList.add('show');
                return;
            }
            
            const inputs = Array.from(teamNames.children);

            // NEUE ÃœBERPRÃœFUNG: PrÃ¼fe auf leere Felder
            let hasEmptyFields = false;
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.classList.add('error');
                    hasEmptyFields = true;
                }
            });
            
            if (hasEmptyFields) {
                errorMessageElement.textContent = 'Bitte gib fÃ¼r alle Teams einen Namen ein.';
                errorMessageElement.classList.add('show');
                return;
            }

            let hasBannedWords = false;
            
            inputs.forEach(input => {
                if (input.value && isNameBanned(input.value)) {
                    input.classList.add('error');
                    hasBannedWords = true;
                }
            });
            
            if (hasBannedWords) {
                errorMessageElement.textContent = 'Bitte verwende angemessene Teamnamen.';
                errorMessageElement.classList.add('show');
                return;
            }
            
            if (checkForDuplicateNames()) {
                errorMessageElement.textContent = 'Jedes Team muss einen einzigartigen Namen haben.';
                errorMessageElement.classList.add('show');
                
                const names = inputs.map(input => input.value.toLowerCase().trim());
                inputs.forEach((input, i) => {
                    if (names.indexOf(names[i]) !== i && names[i]) {
                        input.classList.add('error');
                    }
                });
                return;
            }
            
            teams = inputs.map((input, index) => ({
                name: input.value || `Team ${index + 1}`,
                score: 0
            }));
            
            currentRound = 1;
            currentTurn = 0;
            isFirstRound = true;
            usedCategories.clear();
            
            teamSetup.style.display = 'none';
            gameContainer.style.display = 'block';
            updateScoreDisplay();
            
            // Beginne mit der ersten Runde sofort
            nextRoundButton.click();
        });
        
        updateTeamInputs();
    
        function setTargetArea() {
          targetAngle = Math.random() * 360;
        
          // Halbe Breite, die FAST "calculateScore" matched
          const ring5 = 3;   // gold
          const ring3 = 12; // blue
          const ring1 = 28;  // red
                
        const gradient = `conic-gradient(
            from ${targetAngle - 180}deg at 50% 50%,
                
            /* gray background until outer red zone */
            #a4b0be 0deg,
            #a4b0be ${180 - ring1}deg,
                
            /* red zone  */
            #ff6b6b ${180 - ring1}deg,
            #ff6b6b ${180 - ring3}deg,
                
            /* blue zone */
            #3742fa ${180 - ring3}deg,
            #3742fa ${180 - ring5}deg,
                
            /* gold zone  */
            #FFD700 ${180 - ring5}deg,
            #FFD700 ${180 + ring5}deg,
                
            /* mirror blue */
            #3742fa ${180 + ring5}deg,
            #3742fa ${180 + ring3}deg,
                
            /* mirror red */
            #ff6b6b ${180 + ring3}deg,
            #ff6b6b ${180 + ring1}deg,
                
            /* back to gray background */
            #a4b0be ${180 + ring1}deg,
            #a4b0be 360deg
            )`;
                
        targetArea.style.background = gradient;
        }
        
        function setRandomCategories() {
            let randomIndex;
            let attempts = 0;
            const maxAttempts = categories.length;
            
            // Wenn alle Kategorien verwendet wurden, setze zurÃ¼ck
            if (usedCategories.size >= categories.length) {
                usedCategories.clear();
            }
            
            // Finde eine unbenutzte Kategorie
            do {
                randomIndex = Math.floor(Math.random() * categories.length);
                attempts++;
                if (attempts >= maxAttempts) {
                    // Fallback: Wenn keine unbenutzten gefunden werden, setze zurÃ¼ck
                    usedCategories.clear();
                    break;
                }
            } while (usedCategories.has(randomIndex));
            
            usedCategories.add(randomIndex);
            
            const [top, right, bottom, left] = categories[randomIndex];
            topCategory.textContent = top;
            rightCategory.textContent = right;
            bottomCategory.textContent = bottom;
            leftCategory.textContent = left;
        }
        
        function calculateScore(angle) {
            const normalizedTarget = normalizeAngle(targetAngle);
            const normalizedNeedle = normalizeAngle(angle);
            
            let diff = Math.abs(normalizedTarget - normalizedNeedle);
            if (diff > 180) diff = 360 - diff;
            // Make the score a bit bigger so it seems like you can get scores out side of the are (Ja ist von mir)
            if (diff <= 3.1) {
                triggerConfetti();
                return 5;
            }
            if (diff <= 12.2) return 3;
            if (diff <= 28.3) return 1;
            return 0;
        }
        
        function handleStart(e) {
            if (!canMoveNeedle) return;
            isDragging = true;
            e.preventDefault();
        }
        
        function triggerConfetti() {
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 150,
                    spread: 90,
                    origin: { y: 0.6 },
                    colors: ['#FFD700', '#feca57', '#3742fa'],
                    ticks: 300,
                    shapes: ['square'],
                    gravity: 0.8,
                    scalar: 1.2
                });
            }
        }
        
        function handleMove(e) {
            if (!isDragging || !canMoveNeedle) return;
            e.preventDefault();
            
            const rect = needleContainer.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            let clientX, clientY;
            if (e.type === "touchmove") {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }
            
            const deltaX = clientX - centerX;
            const deltaY = clientY - centerY;
            const angle = Math.atan2(deltaX, -deltaY) * (180 / Math.PI);
            
            currentNeedleAngle = normalizeAngle(angle);
            needle.style.transform = `translate(-50%, -100%) rotate(${currentNeedleAngle}deg)`;
        }
        
        function handleEnd() {
            isDragging = false;
        }
        
        function hideNeedle() {
            needle.style.display = "none";
        }
        
        function showNeedle() {
            needle.style.display = "block";
        }
        
        const modal = document.getElementById("howToPlayModal");
        const howToPlayButton = document.getElementById("howToPlayButton");
        const closeButton = modal.querySelector(".close-button");
        
        howToPlayButton.onclick = function () {
            modal.style.display = "block";
            setTimeout(() => modal.classList.add("show"), 10);
        }
        
        closeButton.onclick = function () {
            modal.classList.remove("show");
            setTimeout(() => modal.style.display = "none", 300);
        }
        
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.classList.remove("show");
                setTimeout(() => modal.style.display = "none", 300);
            }
        }
        
        needleContainer.addEventListener("mousedown", handleStart);
        document.addEventListener("mousemove", handleMove);
        document.addEventListener("mouseup", handleEnd);
        
        needleContainer.addEventListener("touchstart", handleStart, { passive: false });
        document.addEventListener("touchmove", handleMove, { passive: false });
        document.addEventListener("touchend", handleEnd);
        
        toggleButton.addEventListener("click", () => {
            if (isTargetVisible) {
                // Verstecke das Ziel
                isTargetVisible = false;
                targetArea.style.display = "none";
                toggleButton.style.display = "none";
                scoreElement.textContent = "";
                nextRoundButton.style.display = "none";

                // Verstecke die Kategorien fÃ¼r die ratende Person
                hideCategories();
                hideNeedle();  // Verstecke die Nadel auch zuerst

                // Zeige das Cover fÃ¼r die ratende Person
                guessCoverOverlay.classList.add('show');
                guessCoverOverlay.style.display = 'flex';
            } else {
                // Zeige das Ziel wieder (fÃ¼r Aufdecken)
                isTargetVisible = true;
                targetArea.style.display = "block";
                toggleButton.style.display = "none";

                // Zeige die Kategorien wieder beim Aufdecken
                showCategories();

                const score = calculateScore(currentNeedleAngle);
                teams[currentTeamIndex].score += score;
                scoreElement.textContent = `${teams[currentTeamIndex].name} erzielt: ${score} Punkte`;
                updateScoreDisplay();
                canMoveNeedle = false;
                nextRoundButton.style.display = "inline-block";
            }
        });

        nextRoundButton.addEventListener("click", () => {
            // Don't increment currentTurn on the very first round
            if (!isFirstRound) {
                currentTurn++;
            }
            isFirstRound = false;

            if (gameMode === 'rounds' && teams.length > 0) {
                // Check if all teams have played this round
                if (currentTurn > 0 && currentTurn % teams.length === 0) {
                    currentRound++;
                    if (currentRound > maxRounds) {
                        showGameOver();
                        return;
                    }
                }
                updateRoundCounter();
            }

            // VERSTECKE ALLES ZUERST
            hideCategories();
            targetArea.style.display = "none";  // Verstecke das Target sofort
            hideNeedle();

            // Bereite die neue Runde vor
            setTargetArea();
            setRandomCategories();
            needle.style.transform = "translate(-50%, -100%) rotate(0deg)";
            currentNeedleAngle = 0;
            scoreElement.textContent = "";
            canMoveNeedle = false;
            toggleButton.style.display = "none";  // Verstecke den Button
            nextRoundButton.style.display = "none";

            if (teams.length > 0) {
                currentTeamIndex = (currentTeamIndex + 1) % teams.length;
                updateScoreDisplay();
            }

            // Zeige das Cover
            showRoundCover();
        });

        newGameButton.addEventListener("click", () => {
            const userConfirmed = confirm("Bist du sicher, dass du ein neues Spiel starten mÃ¶chtest? Alle PunktestÃ¤nde gehen verloren!");
            if (userConfirmed) {
                location.reload();
            }
        });
        
        setTargetArea();
        setRandomCategories();
        hideNeedle();
        hideCategories();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.4/dist/confetti.browser.min.js"></script>
</body>

</html>
